<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>BYOB Profile</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;padding:24px;background:#f7f7f7}
      .card{max-width:520px;margin:0 auto;background:#fff;border:1px solid #eee;border-radius:12px;padding:20px;box-shadow:0 4px 16px rgba(0,0,0,.06)}
      .btn{display:inline-block;background:#0d6d13;color:#fff;padding:12px 16px;border-radius:10px;text-decoration:none;font-weight:700}
      .muted{color:#666;margin-top:10px}
      .mono{font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; word-break: break-all;}
    </style>
  </head>
  <body>
    <div class="card">
      <h2>Open Profile</h2>
      <p id="desc">Launching BYOB Sportsâ€¦</p>

      <p><a id="open" class="btn" href="#">Open in App</a></p>

      <div class="muted" id="debug" style="display:none">
        Deep link (copy if needed):<br />
        <code class="mono" id="dl"></code>
      </div>
    </div>

    <script>
      const qs = new URLSearchParams(location.search);
      const userId = qs.get('userId');
      const appPath = `/profile/${userId}`;
      const scheme  = `byobsports://${appPath}`;

      const openBtn = document.getElementById('open');
      openBtn.href = scheme;

      // Try opening the app
      setTimeout(() => {
        window.location.href = scheme;

        // If not installed, fallback to App Store after 2s
        setTimeout(() => {
          window.location.href = "https://apps.apple.com/us/app/byob-sports/id6751515573";
        }, 2000);
      }, 300);

      // Show deep link for debugging
      document.getElementById('dl').textContent = scheme;
      document.getElementById('debug').style.display = 'block';
    </script>
  </body>
</html>
